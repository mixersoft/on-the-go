<ion-view class="dark-bg" title="{{label.title}}" hide-back-button="true" >
  <ion-nav-buttons side="left">
    <button menu-toggle="left"class="button button-icon icon ion-navicon"></button>
  </ion-nav-buttons>
  <ion-nav-buttons side="right">
      <div class="buttons">
        <button class="button button-icon icon ion-ios7-information-outline" 
          ng-click="on.showInfo('toggle')">
        </button>
      </div>
  </ion-nav-buttons>

<!--   <ion-header-bar class="bar-subheader">
  </ion-header-bar>
 -->


  <ion-content delegate-handle="collection-repeat-wrap">
    <div class="button-bar bar-royal">
      <a class="button icon ion-checkmark-circled" ui-sref="app.top-picks" ui-sref-active="active"></a>
      <a class="button icon ion-heart" ui-sref=".favorites"  ui-sref-active="active"></a>
      <a class="button icon ion-ios7-upload-outline" ui-sref=".shared"  ui-sref-active="active"></a>
    </div>
    <!-- header card  -->
    <swipe-cards><swipe-card class="card header-card" fly="out"
    on-destroy="on.dontShowHint(this, keep)"
    ng-hide="on.dontShowHint()"
    >
      <div class="item item-divider item-header">
        {{label.header_card[$state.current.name].header}}
        <span class="badge badge-positive">{{filteredPhotos.length}} Photos</span>
      </div>
      <div class="item item-text-wrap">
        {{label.header_card[$state.current.name].body}}
      </div>
      <div class="item item-divider item-footer">
        <p class="fine cursor-pointer" ng-click="on.dontShowHint($event)"><i class="icon ion-close-circled"> Don't Show Me Again</i></p>
      </div>
    </swipe-card></swipe-cards>

    <!-- <div ng-include="'views/template/gallery.html'"></div> -->


    <!--
      - keep item in view on scroll.resize()
      - swipe left/right, like tinder, add class .pick/.skip
      - swipe up to group, or tap in corner
      - http://codepen.io/anon/pen/AEDfa swipeable ion-list
      - http://codepen.io/anon/pen/migzv collection-repeat version
      - http://codepen.io/anon/pen/KwPBMO: collection-repeat with swipecard left-right

    -->

    <!-- collection-repeat  -->
    <ion-list class="otg-cr-preview">
      <div swipe-cards
        collection-repeat="item in filteredPhotos"
        collection-item-width="'100%'"
        collection-item-height="getItemHeight(item, $index)"
        ng-style="{height: getItemHeight(item, $index)+'px'}"
        >

          <swipe-card class="card photo-card"
          uuid-ext="{{item.id}}"
          on-keep="on.cardKeep(item)" 
          on-reject="on.cardReject(item)" 
          on-card-swipe="on.cardSwiped(item)">
            <!-- header -->
            <div class="item item-divider item-stable padding-horizontal"
            ng-if="on.showInfo()">
              <div class="caption capitalize">{{item.caption || item.id}}</div>
            </div>

            <!-- body -->
            <div class="item item-image">
              <div class="photo-wrap">
                <img ng-src="{{item.src}}">
              </div>
            </div>

            <!-- footer -->
            <div class="item item-stable tabs tabs-secondary tabs-icon-left"
            ng-if="on.showInfo()">
              <a class="tab-item" href="#"
              ng-click="on.addCaption($event, item)">
                <i class="icon ion-ios7-compose-outline"></i>
              </a>
              <a class="tab-item" href="#"
              ng-class="{'activated tab-item-royal':item.shared}"
              ng-click="on.addShare($event, item)">
                <i class="icon"
                ng-class="{'ion-ios7-upload-outline':!item.shared, 
                'ion-ios7-upload':item.shared}"></i>
              </a>
              <a class="tab-item" href="#"
              ng-class="{'activated tab-item-royal':item.favorite}"
              ng-click="on.addFavorite($event, item)">
                <i class="icon"
                ng-class="{'ion-ios7-heart-outline':!item.favorite,
                'ion-ios7-heart':item.favorite}"></i>
              </a>
            </div>
          </swipe-card> <!--  end .photo-card  -->

      </div>
    </ion-list>




  </ion-content>
</ion-view>


